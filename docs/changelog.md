# Changelog - Конфигуратор гардероба

## [2024-12-19] - Безопасная русификация прод-сборки

### Добавлено
- Файл `js/ru-bootstrap.js` - безопасный RU-оверлей с preflight проверками
- Автоматическая установка русского языка по умолчанию (ru-RU)
- Узкий fetch-перехват только для словарей и EN-маршрутов
- Слияние переводов из `ru-RU.json` и `config_data_wardrobe_local.json`
- Локализация прелоадера "Загружаем конфигуратор…"
- Обёртка функций `t()` для мягкой подмены на русские строки

### Изменено
- HTML страница `configurator_2508f3617e1046cba5b985f3a7ea393a_page.html` - добавлен скрипт `ru-bootstrap.js` в начало head
- Навигатор браузера принудительно установлен на `ru-RU`

### Исправлено
- Установлен русский язык по умолчанию без изменения минифицированных бандлов
- Обеспечена совместимость с существующей архитектурой конфигуратора
- Сохранена работоспособность калькулятора цен и математики
- Добавлены строгие preflight проверки для предотвращения работы в неправильном контексте

### Технические детали
- Работает поверх минифицированных бандлов без их изменения
- Перехватывает только безопасные GET запросы (словари, EN-маршруты)
- НЕ затрагивает API калькулятора и `config_data.json`
- Использует относительные пути для совместимости с разными серверами
- Включает MutationObserver для отслеживания динамически добавляемых элементов

## [2024-12-19] - Русская локализация по умолчанию

### Добавлено
- Файл `js/ru-bootstrap.js` - безопасный оверлей русской локали
- Автоматическая установка русского языка по умолчанию
- Перехват запросов к словарям переводов с редиректом на `ru-RU.json`
- Слияние переводов из `ru-RU.json` и `config_data_wardrobe_local.json`
- Локализация прелоадера "Загружаем конфигуратор…"

### Изменено
- HTML страница `configurator_2508f3617e1046cba5b985f3a7ea393a_page.html` - добавлен скрипт `ru-bootstrap.js`
- Документация `docs/ARCHITECTURE.md` - обновлена схема загрузки и инструкции

### Исправлено
- Установлен русский язык по умолчанию без изменения минифицированных бандлов
- Обеспечена совместимость с существующей архитектурой конфигуратора
- Сохранена работоспособность калькулятора цен и математики
- Исправлена загрузка и объединение словарей переводов из ru-RU.json и config_data_wardrobe_local.json
- Добавлена агрессивная локализация DOM элементов для перевода статичного контента
- Улучшен перехват i18n функций с периодической проверкой

### Технические детали
- Работает поверх минифицированных бандлов без их изменения
- Перехватывает только безопасные запросы (словари, EN-маршруты)
- НЕ затрагивает API калькулятора и `config_data.json`
- Использует относительные пути для совместимости с разными серверами
